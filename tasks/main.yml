---
- name: update repo cache (debian)
  become: yes
  apt: 
    update_cache: yes
  when: ansible_facts['os_family'] == "Debian"

- name: install updates (debian)
  become: yes
  apt: 
    name: "*"
    state: latest
  when: ansible_facts['os_family'] == "Debian"

- name: install required packages
  become: yes
  apt: 
    name: 
      - ansible
      - docker
      - docker.io
      - python3
      - python3-docker
      - python3-ldap
      - maven
      - vim 
      - screen
      - git
      - openconnect
    state: latest
  when: ansible_facts['os_family'] == "Debian"

- name: add username to sudoers
  become: yes
  sudoers: 
    name: "default"
    user: "{{ sudoers_user }}"
    commands: ALL
    nopassword: yes